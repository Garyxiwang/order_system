<!--pages/order-list/order-list.wxml-->
<view class="order-list-container">
  <!-- çŠ¶æ€æ å ä½ -->
  <view class="status-bar" style="height: {{statusBarHeight}}px"></view>
  
  <!-- åˆ—è¡¨æ ‡é¢˜å¤´éƒ¨ -->
  <view class="list-header" style="padding-top: {{headerPaddingTop}}rpx">
    <view class="header-content">
      <view class="header-left">
        <text class="list-title">ğŸ“‹ è®¢å•åˆ—è¡¨</text>
        <text class="list-subtitle">æŸ¥çœ‹æ‰€æœ‰è®¢å•ä¿¡æ¯</text>
      </view>
    </view>
  </view>

  <!-- ç­›é€‰æŒ‰é’® -->
  <view class="filter-bar">
    <van-button
      type="primary"
      size="normal"
      icon="filter-o"
      bind:click="goToFilter"
      custom-class="filter-btn"
    >
      ç­›é€‰è®¢å•
    </van-button>
  </view>

  <!-- è®¢å•åˆ—è¡¨ -->
  <view class="order-list">
    <view
      wx:for="{{ orderList }}"
      wx:key="id"
      class="order-card"
      bindtap="goToDetail"
      data-id="{{ item.id }}"
    >
      <!-- å¡ç‰‡å¤´éƒ¨ -->
      <view class="card-header">
        <view class="order-number">
          <text class="number-label">è®¢å•ç¼–å·</text>
          <text class="number-value">{{ item.order_number }}</text>
        </view>
        <view class="status-tag" style="background-color: {{ item.statusColor }}; box-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.15);">
          {{ item.order_status }}
        </view>
      </view>

      <!-- å®¢æˆ·ä¿¡æ¯ -->
      <view class="customer-info">
        <view class="customer-name">
          <text class="name-icon">ğŸ‘¤</text>
          <text class="name-text">{{ item.customer_name }}</text>
        </view>
      </view>

      <!-- è®¢å•ä¿¡æ¯ -->
      <view class="order-details">
        <view class="detail-row" >
          <text class="detail-icon">ğŸ¨</text>
          <text class="detail-label">è®¾è®¡å¸ˆï¼š</text>
          <text class="detail-value">{{ item.designer }}</text>
        </view>
        <view class="detail-row" >
          <text class="detail-icon">ğŸ’¼</text>
          <text class="detail-label">é”€å”®å‘˜ï¼š</text>
          <text class="detail-value">{{ item.salesperson }}</text>
        </view>
        <view class="detail-row" >
          <text class="detail-icon">âœ‚ï¸</text>
          <text class="detail-label">æ‹†å•å‘˜ï¼š</text>
          <text class="detail-value">{{ item.splitter || '-' }}</text>
        </view>
        <view class="detail-row" >
          <text class="detail-icon">ğŸ“‹</text>
          <text class="detail-label">è®¢å•ç±»å‹ï¼š</text>
          <text class="detail-value">{{ item.order_type }}</text>
        </view>
        <view class="detail-row">
          <text class="detail-icon">ğŸ’°</text>
          <text class="detail-label">æŠ¥ä»·çŠ¶æ€ï¼š</text>
          <text class="detail-value">{{ item.quote_status || '-' }}</text>
        </view>
        <view class="detail-row" wx:if="{{ item.category_names || item.category_name }}">
          <text class="detail-icon">ğŸ“</text>
          <text class="detail-label">ä¸‹å•ç±»ç›®ï¼š</text>
          <text class="detail-value">{{ item.category_names || item.category_name }}</text>
        </view>
      </view>

      <!-- è®¢å•é‡‘é¢ -->
      <view class="order-footer" wx:if="{{ item.order_amount }}">
        <view class="amount-wrapper">
          <text class="amount-label">è®¢å•é‡‘é¢</text>
          <text class="amount-value">Â¥{{ item.formatted_amount || item.order_amount }}</text>
        </view>
      </view>

      <!-- ç®­å¤´ -->
      <view class="card-arrow">â€º</view>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <van-empty
      wx:if="{{ !loading && orderList.length === 0 }}"
      description="æš‚æ— è®¢å•æ•°æ®"
      image="search"
      custom-class="empty-state"
    />

    <!-- åŠ è½½çŠ¶æ€ -->
    <view class="loading" wx:if="{{ loading }}">
      <van-loading type="spinner" size="24px" color="#1989fa">åŠ è½½ä¸­...</van-loading>
    </view>

    <!-- æ²¡æœ‰æ›´å¤š -->
    <view class="no-more" wx:if="{{ !hasMore && orderList.length > 0 }}">
      <van-divider>æ²¡æœ‰æ›´å¤šäº†</van-divider>
    </view>
  </view>
</view>

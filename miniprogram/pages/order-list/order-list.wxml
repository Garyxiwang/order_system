<!-- pages/order-list/order-list.wxml -->
<view class="order-list-container">
  <!-- 状态栏占位 -->
  <view class="status-bar" style="height: {{statusBarHeight}}px"></view>
  <!-- 列表标题头部 -->
  <view class="list-header" style="padding-top: {{headerPaddingTop}}rpx">
    <view class="header-content">
      <view class="header-left">
        <view class="list-title" catch:tap="goBack">
          <van-icon name="arrow-left" color="#fff" size="20px" style="margin-right: 8rpx;" />
          <text>订单列表</text>
        </view>
        <view class="header-actions">
          <van-button type="primary" size="small" icon="filter-o" bind:click="goToFilter" custom-class="filter-btn">
            筛选订单
          </van-button>
          <view class="total-count">共 {{ total }} 条</view>
        </view>
      </view>
    </view>
  </view>
  <!-- 订单列表 -->
  <view class="order-list">
    <view wx:for="{{ orderList }}" wx:key="id" class="order-card" bindtap="goToDetail" data-id="{{ item.id }}" data-number="{{ item.order_number }}">
      <!-- 订单编号和状态 -->
      <view class="card-header">
        <text class="order-number">{{ item.order_number }}</text>
        <view class="status-tag" style="background-color: {{ item.statusColor }};">
          {{ item.order_status }}
        </view>
      </view>
      <!-- 客户名称和分单日期 -->
      <view class="card-body">
        <view class="info-row">
          <van-icon name="user-circle-o" class="info-icon" color="#1989fa" size="14px" />
          <text class="info-text">{{ item.customer_name }}</text>
        </view>
        <view class="info-row info-row-with-action">
          <view class="info-left">
            <van-icon name="calendar-o" class="info-icon" color="#969799" size="14px" />
            <text class="info-text">分单日期：{{ item.assignment_date }}</text>
          </view>
          <view class="detail-link" catch:tap="goToDetail" data-id="{{ item.id }}" data-number="{{ item.order_number }}">
            <text class="detail-link-text">查看详情</text>
            <van-icon name="arrow" class="detail-link-icon" color="#1989fa" size="12px" />
          </view>
        </view>
      </view>
    </view>
    <!-- 空状态 -->
    <van-empty wx:if="{{ !loading && orderList.length === 0 }}" description="暂无订单数据" image="search" custom-class="empty-state" />
    <!-- 加载状态 -->
    <view class="loading" wx:if="{{ loading }}">
      <van-loading type="spinner" size="24px" color="#1989fa">加载中...</van-loading>
    </view>
    <!-- 没有更多 -->
    <view class="no-more" wx:if="{{ !hasMore && orderList.length > 0 }}">
      <van-divider>没有更多了</van-divider>
    </view>
  </view>
</view>